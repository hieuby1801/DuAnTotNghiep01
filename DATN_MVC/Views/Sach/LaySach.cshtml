@model DATN_MVC.Models.Modeltong
@{
	ViewData["Title"] = "LaySach";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
	.sidebar {
		width: 100%;
		position: sticky;
		top: 100px;
		background-color: #f8f9fa;
		padding: 20px;
		border-radius: 8px;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	}

		.sidebar h5 {
			font-weight: bold;
			color: #007bff;
			margin-bottom: 20px;
		}

		.sidebar .nav-link {
			padding: 8px 0;
			font-weight: 500;
			color: #333;
			transition: all 0.3s;
		}

			.sidebar .nav-link:hover {
				color: #007bff;
				transform: translateX(5px);
			}

	.carousel-wrapper {
		position: relative;
		overflow: hidden;
	}

	.carousel-track {
		display: flex;
		transition: transform 0.5s ease;
	}

	.book-card {
		flex: 0 0 20%;
		max-width: 20%;
		padding: 10px;
		box-sizing: border-box;
	}

	.book-card-inner {
		border-radius: 10px;
		padding: 15px;
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
		position: relative;
		text-align: center;
		transition: transform 0.3s;
		background-color: white;
	}

		.book-card-inner:hover {
			transform: scale(1.05);
		}

	.book-image {
		width: 100%;
		border-radius: 8px;
	}

	.book-title {
		font-weight: bold;
		font-size: 1rem;
		margin-top: 10px;
		text-decoration: none;
		color: black;
	}

	.book-author {
		color: gray;
		font-size: 0.9rem;
	}

	.book-price {
		color: red;
		font-weight: bold;
		font-size: 1.1rem;
	}

	.carousel-btn {
		position: absolute;
		top: 50%;
		transform: translateY(-50%);
		background-color: rgba(0,0,0,0.5);
		color: white;
		border: none;
		padding: 10px;
		cursor: pointer;
		z-index: 2;
	}

		.carousel-btn.left {
			left: 0;
		}

		.carousel-btn.right {
			right: 0;
		}

	.theloai-container {
		display: flex;
		flex-wrap: wrap;
		gap: 15px;
	}

	.theloai-item {
		background-color: #f0f0f0;
		padding: 15px;
		border-radius: 5px;
		border: 1px solid #ddd;
		max-width: calc(25% - 15px);
		text-align: center;
	}

	#tentheloai1 {
		font-size: 1.5rem;
		font-weight: bold;
		margin-bottom: 10px;
		color: #333;
	}

	.theloai-item a {
		font-weight: bold;
		color: #007bff;
		text-decoration: none;
	}

		.theloai-item a:hover {
			color: #0056b3;
			text-decoration: underline;
		}
</style>

<div class="container mt-4">
	<div class="row">
		<!-- Sidebar bên trái -->
		<div class="col-md-3">
			<div class="sidebar">
				<h5><i class="bi bi-book-half me-2"></i>Nhóm Sản Phẩm</h5>
				<ul class="nav flex-column mb-4">
					<li class="nav-item mb-2"><a class="nav-link" href="#"><i class="bi bi-grid-fill me-2"></i>Lịch Sử - Địa Lí</a></li>
					<li class="nav-item mb-2"><a class="nav-link" href="#"><i class="bi bi-star-fill me-2 text-warning"></i>Văn Học</a></li>
					<li class="nav-item mb-2"><a class="nav-link" href="#"><i class="bi bi-tags-fill me-2 text-danger"></i>Kinh Tế</a></li>
					<li class="nav-item mb-2"><a class="nav-link" href="#"><i class="bi bi-clock-history me-2"></i>Tâm Lý - Kỹ Năng Sống</a></li>
					<li class="nav-item mb-2"><a class="nav-link" href="#"><i class="bi bi-info-circle-fill me-2"></i>Ngoại Ngữ</a></li>
					<li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-telephone-fill me-2"></i>Thiếu Nhi</a></li>
				</ul>

				<hr />

				<!-- Lọc theo giá tiền -->
				<h6 class="mt-3">Lọc theo giá</h6>
				<div class="form-check">
					<input class="form-check-input" type="checkbox" id="gia1">
					<label class="form-check-label" for="gia1">0đ-50,000đ</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="checkbox" id="gia2">
					<label class="form-check-label" for="gia2">50,000₫ - 100,000₫</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="checkbox" id="gia3">
					<label class="form-check-label" for="gia3">100,000đ-200,000đ</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="checkbox" id="gia3">
					<label class="form-check-label" for="gia3">200,000đ-Trở Lên</label>
				</div>

				<!-- Lọc theo độ tuổi -->
				<h6 class="mt-4">Độ tuổi</h6>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="tuoi" id="tuoi1">
					<label class="form-check-label" for="tuoi1">Dưới 6 tuổi</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="tuoi" id="tuoi2">
					<label class="form-check-label" for="tuoi2">6 - 12 tuổi</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="tuoi" id="tuoi3">
					<label class="form-check-label" for="tuoi3">Trên 12 tuổi</label>
				</div>

				<!-- Lọc theo tác giả -->
				<h6 class="mt-4">Tác giả</h6>
				<input type="text" class="form-control" placeholder="Nhập tên tác giả..." />

				<!-- Nút lọc -->
				<button class="btn btn-primary w-100 mt-3"><i class="bi bi-funnel-fill me-1"></i>Lọc kết quả</button>
			</div>
		</div>

		<!-- Nội dung chính -->
		<div class="col-md-9">
			<h5 id="tentheloai1">Thể loại sách</h5>
			<div class="theloai-container">
				@foreach (var theLoai in Model.TheLoais)
				{
					<div class="theloai-item">
						<a href="#" class="theloai-link">@theLoai.TenTheLoai</a>
					</div>
				}
			</div>

			<h5 id="tentheloai1" class="mt-4">Sách mới</h5>
			<div class="carousel-wrapper mt-3">
				<button class="carousel-btn left" onclick="moveSlide(-1)"><i class="bi bi-chevron-left"></i></button>
				<div class="carousel-track" id="carouselTrack">
					@if (Model.Saches != null && Model.Saches.Any())
					{
						foreach (var item in Model.Saches)
						{
							<div class="book-card">
								<div class="book-card-inner">
									<img src="@Url.Content(item.HinhAnh)" class="book-image" alt="@item.TenSach" />
									<a href="#" class="book-title">@item.TenSach</a>
									@if (Model.nhaCungCaps != null && Model.nhaCungCaps.Any())
									{
										var nhaCungCap = Model.nhaCungCaps.FirstOrDefault(ncc => ncc.MaNhaCungCap == item.MaNhaCungCap);
										if (nhaCungCap != null)
										{
											<small>Nhà cung cấp: @nhaCungCap.TenNhaCungCap</small>
										}
										else
										{
											<small>Nhà cung cấp: Không tìm thấy</small>
										}
									}
									else
									{
										<small>Nhà cung cấp: Không có dữ liệu</small>
									}
									<p class="book-author mb-1">@item.TacGia</p>
									<div class="text-warning mb-2">
										<i class="bi bi-star-fill"></i>
										<i class="bi bi-star-fill"></i>
										<i class="bi bi-star-fill"></i>
										<i class="bi bi-star-fill"></i>
										<i class="bi bi-star-fill"></i>
									</div>
									<p class="book-price">@item.GiaTien ₫</p>
								</div>
							</div>
						}
					}
					else
					{
						<div class="text-center">Không có dữ liệu.</div>
					}
				</div>
				<button class="carousel-btn right" onclick="moveSlide(1)"><i class="bi bi-chevron-right"></i></button>
			</div>
		</div>
	</div>
</div>

<script>
	let currentIndex = 0;

	function moveSlide(direction) {
		const track = document.getElementById("carouselTrack");
		const itemWidth = track.querySelector(".book-card").offsetWidth;
		const totalItems = track.children.length;
		const visibleItems = 5;

		currentIndex += direction;

		if (currentIndex < 0) currentIndex = 0;
		if (currentIndex > totalItems - visibleItems) currentIndex = totalItems - visibleItems;

		track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
	}
</script>
